(function(b){var c=function(e){var d=this;a(d);d.element=e;d.listeners=[]};c.prototype.trigger=function(g,h){var d=this;if(d.listeners[g]!=undefined){var f=d.listeners[g].length;for(var e=0;e<f;e++){d.listeners[g][e].apply(d,h)}}};c.prototype.addEventListener=function(e,f){var d=this;if(d.listeners[e]==undefined){d.listeners[e]=[]}if(d.listeners[e].indexOf(f)==-1){d.listeners[e].push(f)}};c.prototype.removeEventListener=function(f,g){var d=this;if(d.listeners[f]!=undefined){var e=d.listeners[f].indexOf(g);if(e!=-1){d.listeners[f].splice(e,1)}}};function a(o){var d=null;var g=false;var x=false;var u=false;var f=0;var e=0;var l=0;var k=0;var j=0;var i=0;var h=0;function v(A){if(A.target==d){A.preventDefault();var z=A.offsetX;var B=A.offsetY;i=z;h=B;o.trigger("mousemove",[z,B,A])}}function r(y){if(y.target==d){y.preventDefault();f=y.offsetX;e=y.offsetY;switch(y.which){case 1:g=true;break;case 2:x=true;break;case 3:u=true;break}o.trigger("mousedown",[f,e,y]);return false}}function p(y){y.preventDefault();if(o.listeners.mouseenter!=undefined){call_events(o.listeners.mouseenter,o,[y])}}function q(z){z.preventDefault();var y=z.detail?z.detail*(-120):z.wheelDelta;if(/Firefox/i.test(navigator.userAgent)){y=(y/360)*120}j=y;if(o.listeners.mousewheel!=undefined){call_events(o.listeners.mousewheel,o,[y,z])}}function w(y){if(y.target==d){y.preventDefault();g=false;u=false;x=false;o.trigger("mouseout",[y]);return false}}function s(y){if(y.target==d){y.preventDefault();if(d!==null){l=y.offsetX;k=y.offsetY;switch(y.which){case 1:g=false;break;case 2:x=false;break;case 3:u=false}o.trigger("mouseup",[l,k,y])}return false}}function t(y){y.preventDefault();return false}function n(y){g=false;u=false;x=false}b.addEventListener("blur",n);var m=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel";Object.defineProperty(o,"element",{get:function(){return d},set:function(y){if(y!=d){if(d!=null&&d instanceof Element){document.removeEventListener("mouseup",s);d.removeEventListener("mousemove",v);d.removeEventListener("mousedown",r);d.removeEventListener("mouseup",s);d.removeEventListener("mouseout",w);d.removeEventListener("mouseenter",p);d.removeEventListener("contextmenu",t);d.remove(m,q)}d=y;if(y instanceof Element){document.addEventListener("mouseup",s);d.addEventListener("mousemove",v);d.addEventListener("mousedown",r);d.addEventListener("mouseup",s);d.addEventListener("mouseout",w);d.addEventListener("mouseenter",p);d.addEventListener("contextmenu",t);d.addEventListener(m,q)}}}});Object.defineProperty(o,"left",{get:function(){return g}});Object.defineProperty(o,"middle",{get:function(){return x}});Object.defineProperty(o,"right",{get:function(){return u}});Object.defineProperty(o,"lastDownX",{get:function(){return f}});Object.defineProperty(o,"lastDownY",{get:function(){return e}});Object.defineProperty(o,"lastUpX",{get:function(){return l}});Object.defineProperty(o,"lastUpY",{get:function(){return k}});Object.defineProperty(o,"lastWheel",{get:function(){return j}});Object.defineProperty(o,"lastX",{get:function(){return i}});Object.defineProperty(o,"lastY",{get:function(){return h}})}b.Mouse=c})(window);